# Ozon Telegram Bot

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
–ü–µ—Ä–µ–¥ push/deploy –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```bash
python scripts/smoke_syntax.py
```

## –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Render)

- –î–ª—è –±–æ—Ç–∞ –µ—Å—Ç—å –ø–ª–∞—Ç–Ω—ã–π –¥–∏—Å–∫ Render. –í—Å–µ –¥–∞–Ω–Ω—ã–µ (–æ—á–µ—Ä–µ–¥—å –∞—É—Ç—Ä–∏—á–µ–π, SKU-–∫–µ—à, —Å–æ—Å—Ç–æ—è–Ω–∏—è) –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ `STORAGE_DIR` (–∏–ª–∏ `RENDER_DISK_PATH`).
- –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ Render Dashboard –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä: `STORAGE_DIR=/var/data` (mount path –¥–∏—Å–∫–∞).
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π ROOT –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–∞—Ç–∞–ª–æ–≥ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ.
- –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤ `docs/Render.md`.

## –ß–∞—Ç—ã Ozon (Seller API)

- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã `/v3/chat/list`, `/v3/chat/history` –∏ `/v1/chat/send/message`.
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∞—Ç—ã `chat_type=BUYER_SELLER`; —Å–∏—Å—Ç–µ–º–Ω—ã–µ/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–∫—Ä—ã—Ç—ã.
- –í –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è `Customer`/`Seller` (NotificationUser –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è).
- –ò—Å—Ç–æ—Ä–∏—è –∏ —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 —Å–µ–∫—É–Ω–¥, –º–æ–∂–Ω–æ —Ñ–æ—Ä—Å-–æ–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π ¬´üîÑ –û–±–Ω–æ–≤–∏—Ç—å¬ª –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞.
- –ö–Ω–æ–ø–∫–∞ ¬´ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ –ø–∞–º—è—Ç–∏ –∏ –¥–∞—ë—Ç —á–µ—Ä–Ω–æ–≤–∏–∫.
- –ö–Ω–æ–ø–∫–∞ ¬´üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Ozon¬ª —Ä–µ–∞–ª—å–Ω–æ —à–ª—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Seller API; –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å (kind=chat).
- –≠–º–æ–¥–∑–∏ –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è: –ò–ò-–æ—Ç–≤–µ—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Å—Ç–∏–ª—å.
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö Ozon (–≤ —Ç–æ–º —á–∏—Å–ª–µ 520) –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å backoff –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

### –î–µ–±–∞–≥

- –ë—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —á–∞—Ç–æ–≤: `python -m unittest tests.test_chat_logic`.
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–µ—à–∞ —Å–ø–∏—Å–∫–æ–≤ —á–∞—Ç–æ–≤: –æ—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥–æ–π `/chats` –∏ –Ω–∞–∂–∞—Ç—å ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª.
